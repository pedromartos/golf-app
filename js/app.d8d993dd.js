(function(e){function t(t){for(var n,a,u=t[0],c=t[1],i=t[2],l=0,p=[];l<u.length;l++)a=u[l],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&p.push(r[a][0]),r[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);d&&d(t);while(p.length)p.shift()();return s.push.apply(s,i||[]),o()}function o(){for(var e,t=0;t<s.length;t++){for(var o=s[t],n=!0,a=1;a<o.length;a++){var u=o[a];0!==r[u]&&(n=!1)}n&&(s.splice(t--,1),e=c(c.s=o[0]))}return e}var n={},a={app:0},r={app:0},s=[];function u(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-2ba7743e":"6d1a2347","chunk-47f9774c":"c4b0237c","chunk-792e1be9":"53bd5845","chunk-844dda60":"1f1b0b6c"}[e]+".js"}function c(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,c),o.l=!0,o.exports}c.e=function(e){var t=[],o={"chunk-2ba7743e":1,"chunk-47f9774c":1,"chunk-792e1be9":1,"chunk-844dda60":1};a[e]?t.push(a[e]):0!==a[e]&&o[e]&&t.push(a[e]=new Promise((function(t,o){for(var n="css/"+({}[e]||e)+"."+{"chunk-2ba7743e":"127e1df8","chunk-47f9774c":"f78646f2","chunk-792e1be9":"0e433876","chunk-844dda60":"7973bc73"}[e]+".css",r=c.p+n,s=document.getElementsByTagName("link"),u=0;u<s.length;u++){var i=s[u],l=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(l===n||l===r))return t()}var p=document.getElementsByTagName("style");for(u=0;u<p.length;u++){i=p[u],l=i.getAttribute("data-href");if(l===n||l===r)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var n=t&&t.target&&t.target.src||r,s=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=n,delete a[e],d.parentNode.removeChild(d),o(s)},d.href=r;var m=document.getElementsByTagName("head")[0];m.appendChild(d)})).then((function(){a[e]=0})));var n=r[e];if(0!==n)if(n)t.push(n[2]);else{var s=new Promise((function(t,o){n=r[e]=[t,o]}));t.push(n[2]=s);var i,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=u(e);var p=new Error;i=function(t){l.onerror=l.onload=null,clearTimeout(d);var o=r[e];if(0!==o){if(o){var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;p.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",p.name="ChunkLoadError",p.type=n,p.request=a,o[1](p)}r[e]=void 0}};var d=setTimeout((function(){i({type:"timeout",target:l})}),12e4);l.onerror=l.onload=i,document.head.appendChild(l)}return Promise.all(t)},c.m=e,c.c=n,c.d=function(e,t,o){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(c.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(o,n,function(t){return e[t]}.bind(null,n));return o},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/golf-app/",c.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var p=0;p<i.length;p++)t(i[p]);var d=l;s.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"16a5":function(e,t,o){},"21bb":function(e,t,o){"use strict";var n=o("7a98"),a=o.n(n);a.a},"56d7":function(e,t,o){"use strict";o.r(t);var n=o("2b0e"),a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("b-navbar",{attrs:{toggleable:"md",type:"dark",variant:"info"}},[o("b-navbar-brand",{attrs:{to:{name:"home"}}},[e._v("Golf App")]),o("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),o("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[o("b-navbar-nav",[o("b-nav-item",{attrs:{href:"#"}},[e._v("About")])],1),o("b-navbar-nav",{staticClass:"ml-auto"},[e.isLoggedIn?e._e():o("b-button",{attrs:{variant:"primary",size:"sm"},on:{click:e.login}},[o("fa-icon",{attrs:{icon:["fab","facebook-square"]}}),e._v("\n          Login with Facebook\n        ")],1),e.isLoggedIn?o("b-dropdown",{staticClass:"m-2 logged-in",attrs:{size:"sm",right:"",variant:"light"},scopedSlots:e._u([{key:"button-content",fn:function(){return[o("b-img",{staticClass:"pic",attrs:{src:e.user.picture.data.url}}),o("span",{staticClass:"name"},[e._v(e._s(e.user.name))])]},proxy:!0}],null,!1,1932649569)},[o("b-dropdown-item",{attrs:{to:{name:"new-group"}}},[o("fa-icon",{attrs:{icon:"plus"}}),e._v("\n            Create New Image Group\n          ")],1),o("b-dropdown-item",{attrs:{to:{name:"list-groups"}}},[o("fa-icon",{attrs:{icon:"tasks"}}),e._v("\n            Manage Image Groups\n          ")],1),o("b-dropdown-item",{on:{click:e.logout}},[e._v("Logout")])],1):e._e()],1)],1)],1),o("router-view",{staticClass:"container"})],1)},r=[],s={name:"App",computed:{isLoggedIn:function(){return this.$store.getters["auth/isLoggedIn"]},user:function(){return this.$store.state.auth.user}},methods:{login:function(){window.FB.login(e=>{this.$store.dispatch("auth/facebookLogin",e).then(()=>{this.$router.push({name:"dashboard"})})},{scope:"public_profile,email"})},logout:function(){window.FB.logout(e=>{this.$store.dispatch("auth/facebookLogin",e).then(()=>{this.$router.push({name:"home"})})})},checkLoginState:function(){window.FB.getLoginStatus(e=>{this.$store.dispatch("auth/facebookLogin",e)})}},mounted:function(){window.fbAsyncInit=()=>{window.FB.init({appId:"501952337325008",cookie:!0,xfbml:!0,version:"v2.2"}),window.FB.AppEvents.logPageView(),this.checkLoginState()}},created:function(){(function(e,t,o){var n,a=e.getElementsByTagName(t)[0];e.getElementById(o)||(n=e.createElement(t),n.id=o,n.src="https://connect.facebook.net/en_US/sdk.js",a.parentNode.insertBefore(n,a))})(document,"script","facebook-jssdk")}},u=s,c=(o("5c0b"),o("2877")),i=Object(c["a"])(u,a,r,!1,null,null,null),l=i.exports,p=o("8c4f"),d=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"container",attrs:{id:"dashboard"}},[o("b-jumbotron",{attrs:{"header-level":"4",header:"Welcome",lead:"Select bellow which action you want to take"}},[o("div",{staticClass:"buttons"},[o("b-button",{attrs:{variant:"primary",to:{name:"new-group"}}},[o("fa-icon",{attrs:{icon:"plus"}}),e._v("\n        Create New Image Group\n      ")],1),o("b-button",{attrs:{variant:"primary",to:{name:"list-groups"}}},[o("fa-icon",{attrs:{icon:"tasks"}}),e._v("\n        Manage Image Groups\n      ")],1)],1)])],1)},m=[],g={name:"Dashboard"},f=g,h=(o("b985"),Object(c["a"])(f,d,m,!1,null,null,null)),v=h.exports,b=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"home"}},[o("b-jumbotron",{attrs:{"header-level":"4",header:"Golf App"}})],1)},w=[],k={name:"Home",methods:{login:function(){window.FB.login(e=>{this.$store.dispatch("auth/facebookLogin",e)},{scope:"public_profile,email"})}},mounted:function(){this.$route.params.authError&&this.$bvToast.toast("You must login first",{title:"Error",variant:"danger"})}},y=k,S=(o("21bb"),Object(c["a"])(y,b,w,!1,null,null,null)),_=S.exports,E=o("2f62"),I=o("bc3a"),G=o.n(I);const L={status:"",token:localStorage.getItem("golf-token")||"",user:JSON.parse(localStorage.getItem("golf-user"))||{}},O={isLoggedIn:e=>!!e.token,authStatus:e=>e.status,getUser:e=>e.user},$={facebookLogin({commit:e,dispatch:t},o){return e("authRequest"),console.log("FB RESPONSE",o),new Promise(n=>{"connected"==o.status?window.FB.api("/me","GET",{fields:["name","picture"]},(function(a){e("authSuccess",{token:o.authResponse.accessToken,user:a});const r={id:a.id,name:a.name};G.a.post("https://ec2-34-203-12-149.compute-1.amazonaws.com/api/v1/users",r).then(e=>{t("imageGroup/setGroups",e.data.image_groups,{root:!0}),n(!0)})})):"unknown"==o.status?e("logout"):console.log("ELSE",o)})},updateUser({commit:e},t){e("setUser",t),e("saveUser")},createUser({commit:e},t){return new Promise((o,n)=>{e("authRequest"),G.a.get(`auth.json?user=${t.username}`).then(t=>{const n=t.data.token;G.a.defaults.headers.common["Authorization"]=n,e("authSuccess",{token:n,user:t.data.user}),o(t)}).catch(t=>{e("logout"),e("authError"),n(t)})})},recoverUser({commit:e}){let t={};localStorage.getItem("golf-user")&&(t=JSON.parse(localStorage.getItem("golf-user"))),e("setUser",t)}},j={authRequest(e){e.status="loading"},authSuccess(e,t){e.status="success",e.token=t.token,e.user=t.user,localStorage.setItem("golf-user",JSON.stringify(e.user)),localStorage.setItem("golf-token",t.token)},authError(e){e.status="error"},logout(e){e.status="",e.token="",e.user={},localStorage.removeItem("golf-token"),localStorage.removeItem("golf-user"),localStorage.removeItem("golf-groups")},setUser(e,t){e.user=t},saveUser(){const e=JSON.stringify(L.user);localStorage.setItem("golf-user",e)}};var T={namespaced:!0,state:L,getters:O,actions:$,mutations:j};const A=JSON.parse(localStorage.getItem("golf-groups"))||{groups:[],lastUpdated:null},P={formatGroups:e=>{const t=[];for(const o of e.groups)t.push({id:o.id,thumbnail:o.thumbnail,...o.properties});return t},getGroup:()=>e=>{return new Promise(t=>{G.a.get(`https://ec2-34-203-12-149.compute-1.amazonaws.com/api/v1/image-group/${e}`).then(e=>{t(e.data)})})}},C={recoverGroups({commit:e,rootGetters:t}){const o=t["auth/getUser"];G.a.get(`https://ec2-34-203-12-149.compute-1.amazonaws.com/api/v1/users/${o.id}`).then(t=>{e("setGroups",t.data.image_groups)})},addGroup({rootGetters:e},t){return new Promise(o=>{const n=e["auth/getUser"];G.a.post(`https://ec2-34-203-12-149.compute-1.amazonaws.com/api/v1/users/${n.id}`,t).then(e=>{const t=e.data.image_groups.pop();o({status:"success",msg:"Group created successfully.",id:t.id})})})},saveGroup({state:e},t){return new Promise(o=>{const n={...t};delete n.id,G.a.put(`https://ec2-34-203-12-149.compute-1.amazonaws.com/api/v1/image-group/${t.id}`,n).then(t=>{o({status:"success",msg:"Group created successfully.",group:e.groups.find(e=>e.id==t.data.id)})})})},setGroups({commit:e},t){e("setGroups",t),e("updateGroups")}},N={setGroups(e,t){e.groups=t,e.lastUpdated=new Date},pushGroup(e,t){e.groups.push(t)},updateGroups(e){const t=JSON.stringify(e);localStorage.setItem("golf-groups",t)}};var Y={namespaced:!0,state:A,getters:P,actions:C,mutations:N};n["default"].use(E["a"]);var x=new E["a"].Store({modules:{auth:T,imageGroup:Y},state:{},getters:{},actions:{},mutations:{}});n["default"].use(p["a"]);const U=new p["a"]({routes:[{path:"/",name:"home",component:_},{path:"/welcome",name:"dashboard",component:v,meta:{requiresAuth:!0}},{path:"/image-groups/",component:()=>o.e("chunk-792e1be9").then(o.bind(null,"a12b")),meta:{requiresAuth:!0},children:[{path:"new",name:"new-group",component:()=>o.e("chunk-844dda60").then(o.bind(null,"fec6"))},{path:"view",name:"list-groups",component:()=>o.e("chunk-47f9774c").then(o.bind(null,"b01d"))},{path:"view/:groupId",name:"view-group",props:!0,component:()=>o.e("chunk-2ba7743e").then(o.bind(null,"e898"))}]}]});U.beforeEach((e,t,o)=>{if(e.matched.some(e=>e.meta.requiresAuth)){if(x.getters["auth/isLoggedIn"])return void o();o({name:"home",params:{authError:!0}})}else o()});var X=U,B=o("5f5b"),q=o("6591"),F=o("ecee"),z=o("b702"),D=o("c074"),J=o("f2d1"),M=o("ad3d"),R={bind:function(e,t,o){const n={},a=function(){document.onmouseup=null,document.onmousemove=null},r=function(t){const a={};a.top=t.offsetTop-n.curY,a.left=t.offsetLeft-n.curX,o.context.$emit("drag",a);const r=e.querySelectorAll(".img img");r.forEach(e=>{e.style.top=a.top+"px",e.style.left=a.left+"px"})};e.addEventListener("mousedown",(function(e){e.preventDefault(),n.prevX=e.clientX,n.prevY=e.clientY;const t=e.target;document.onmouseup=a,document.onmousemove=function(e){e.preventDefault(),n.curX=n.prevX-e.clientX,n.curY=n.prevY-e.clientY,n.prevX=e.clientX,n.prevY=e.clientY,r(t)}})),e.addEventListener("touchstart",(function(t){t.preventDefault(),n.prevX=t.targetTouches[0].pageX,n.prevY=t.targetTouches[0].pageY;const o=t.target;e.addEventListener("touchmove",(function(e){e.preventDefault(),n.curX=n.prevX-e.targetTouches[0].pageX,n.curY=n.prevY-e.targetTouches[0].pageY,n.prevX=e.targetTouches[0].pageX,n.prevY=e.targetTouches[0].pageY,r(o)}))}))}};n["default"].use(B["a"]),n["default"].use(q["VueHammer"]),F["c"].add(z["a"]),F["c"].add(D["a"]),F["c"].add(J["a"]),n["default"].component("fa-icon",M["a"]),n["default"].config.productionTip=!1,n["default"].directive("draggable",R),new n["default"]({router:X,store:x,render:function(e){return e(l)}}).$mount("#app")},"5c0b":function(e,t,o){"use strict";var n=o("e332"),a=o.n(n);a.a},"7a98":function(e,t,o){},b985:function(e,t,o){"use strict";var n=o("16a5"),a=o.n(n);a.a},e332:function(e,t,o){}});
//# sourceMappingURL=app.d8d993dd.js.map