{"version":3,"sources":["webpack:///./src/views/image-groups/ViewGroup.vue?acf3","webpack:///./src/views/image-groups/ViewGroup.vue?b009","webpack:///src/views/image-groups/ViewGroup.vue","webpack:///./src/views/image-groups/ViewGroup.vue?cb35","webpack:///./src/views/image-groups/ViewGroup.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_v","_s","group","name","isEnabled","on","toggleGestures","directives","rawName","value","images","length","expression","model","callback","$$v","$set","_l","img","index","key","arg","style","_e","saveGroup","staticRenderFns","props","data","mousePos","computed","imageStyles","imgWidth","videoDimensions","width","Math","ceil","zoom","top","position","left","methods","els","document","querySelectorAll","forEach","el","classList","add","remove","zoomImg","e","scale","initDrag","prevX","changedPointers","pageX","prevY","pageY","dragImg","preventDefault","target","curX","curY","startDrag","offset","offsetTop","offsetLeft","children","child","$store","dispatch","then","response","$bvToast","toast","msg","title","status","created","getters","groupId","id","properties","undefined","component"],"mappings":"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","file":"js/chunk-2ba7743e.6d1a2347.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ViewGroup.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ViewGroup.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"view-group\"}},[_c('section',{staticClass:\"header\"},[_c('h1',[_vm._v(\"Managing group: \"+_vm._s(_vm.group.name))]),_c('p',{staticClass:\"lead\"},[_vm._v(\"\\n      Move/Zoom the images\\n\\n      \"),_c('b-button',{staticClass:\"toggle-gestures\",attrs:{\"variant\":_vm.isEnabled ? 'primary' : '',\"size\":\"sm\"},on:{\"click\":_vm.toggleGestures}},[_vm._v(\"\\n        Move/Zoom: \"+_vm._s(_vm.isEnabled ? \"ON\" : \"OFF\")+\"\\n      \")])],1)]),(_vm.group.images)?_c('section',{staticClass:\"body\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.group.images.length > 0),expression:\"group.images.length > 0\"}],staticClass:\"adjust-images\"},[_c('b-row',[_c('b-col',{attrs:{\"cols\":\"12\"}},[_vm._v(\"\\n          Zoom:\\n        \")]),_c('b-col',{attrs:{\"cols\":\"12\"}},[_c('b-form-input',{attrs:{\"type\":\"range\",\"min\":\"0.1\",\"max\":\"2\",\"step\":\"0.001\"},model:{value:(_vm.group.zoom),callback:function ($$v) {_vm.$set(_vm.group, \"zoom\", $$v)},expression:\"group.zoom\"}})],1)],1),_c('b-row',{staticClass:\"images px-1 px-md-3\",attrs:{\"id\":\"gallery\"}},_vm._l((_vm.group.images),function(img,index){return _c('b-col',{key:index,staticClass:\"img px-0\",attrs:{\"cols\":\"12\",\"md\":\"4\"}},[_c('b-img',{directives:[{name:\"hammer\",rawName:\"v-hammer:pinch\",value:(_vm.zoomImg),expression:\"zoomImg\",arg:\"pinch\"},{name:\"hammer\",rawName:\"v-hammer:pan\",value:(_vm.dragImg),expression:\"dragImg\",arg:\"pan\"},{name:\"hammer\",rawName:\"v-hammer:panstart\",value:(_vm.initDrag),expression:\"initDrag\",arg:\"panstart\"}],style:(_vm.imageStyles),attrs:{\"src\":img,\"id\":(\"img-\" + index)}})],1)}),1)],1)]):_vm._e(),_c('section',{staticClass:\"footer top-spaced-border\"},[_c('b-button',{attrs:{\"variant\":\"primary\",\"size\":\"lg\"},on:{\"click\":_vm.saveGroup}},[_c('fa-icon',{attrs:{\"icon\":\"save\"}}),_vm._v(\"\\n      Save Group\\n    \")],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"view-group\">\n    <section class=\"header\">\n      <h1>Managing group: {{ group.name }}</h1>\n      <p class=\"lead\">\n        Move/Zoom the images\n\n        <b-button\n          :variant=\"isEnabled ? 'primary' : ''\"\n          size=\"sm\"\n          @click=\"toggleGestures\"\n          class=\"toggle-gestures\"\n        >\n          Move/Zoom: {{ isEnabled ? \"ON\" : \"OFF\" }}\n        </b-button>\n      </p>\n    </section>\n\n    <section class=\"body\" v-if=\"group.images\">\n      <div class=\"adjust-images\" v-show=\"group.images.length > 0\">\n        <b-row>\n          <b-col cols=\"12\">\n            Zoom:\n          </b-col>\n          <b-col cols=\"12\">\n            <b-form-input\n              type=\"range\"\n              v-model=\"group.zoom\"\n              min=\"0.1\"\n              max=\"2\"\n              step=\"0.001\"\n            >\n            </b-form-input>\n          </b-col>\n        </b-row>\n\n        <b-row class=\"images px-1 px-md-3\" id=\"gallery\">\n          <b-col\n            cols=\"12\"\n            md=\"4\"\n            class=\"img px-0\"\n            v-for=\"(img, index) in group.images\"\n            :key=\"index\"\n          >\n            <b-img\n              :src=\"img\"\n              :id=\"`img-${index}`\"\n              :style=\"imageStyles\"\n              v-hammer:pinch=\"zoomImg\"\n              v-hammer:pan=\"dragImg\"\n              v-hammer:panstart=\"initDrag\"\n            />\n          </b-col>\n        </b-row>\n      </div>\n    </section>\n\n    <section class=\"footer top-spaced-border\">\n      <b-button variant=\"primary\" size=\"lg\" @click=\"saveGroup\">\n        <fa-icon icon=\"save\" />\n        Save Group\n      </b-button>\n    </section>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"ViewGroup\",\n  props: [\"groupId\"],\n  data: function() {\n    return {\n      group: {},\n      mousePos: {},\n      isEnabled: true\n    };\n  },\n  computed: {\n    imageStyles: function() {\n      const imgWidth = this.group.videoDimensions.width;\n\n      return {\n        width: `${Math.ceil(imgWidth * this.group.zoom)}px`,\n        top: `${this.group.position.top}px`,\n        left: `${this.group.position.left}px`\n      };\n    }\n  },\n  methods: {\n    toggleGestures: function() {\n      const els = document.querySelectorAll(\".img\");\n\n      els.forEach(el => {\n        if (!this.isEnabled) {\n          el.classList.remove(\"disabled\");\n        } else {\n          el.classList.add(\"disabled\");\n        }\n      });\n\n      this.isEnabled = !this.isEnabled;\n    },\n    zoomImg: function(e) {\n      if (e.scale > 1) {\n        this.group.zoom = 1 * this.group.zoom + e.scale / 1000;\n      } else {\n        this.group.zoom = 1 * this.group.zoom - (1 - e.scale) / 100;\n      }\n    },\n    initDrag: function(e) {\n      this.mousePos.prevX = e.changedPointers[0].pageX;\n      this.mousePos.prevY = e.changedPointers[0].pageY;\n    },\n    dragImg: function(e) {\n      e.preventDefault();\n\n      const img = e.target;\n\n      this.mousePos.curX = this.mousePos.prevX - e.changedPointers[0].pageX;\n      this.mousePos.curY = this.mousePos.prevY - e.changedPointers[0].pageY;\n      this.mousePos.prevX = e.changedPointers[0].pageX;\n      this.mousePos.prevY = e.changedPointers[0].pageY;\n\n      this.startDrag(img);\n    },\n    startDrag: function(img) {\n      const offset = {};\n\n      offset.top = img.offsetTop - this.mousePos.curY;\n      offset.left = img.offsetLeft - this.mousePos.curX;\n\n      this.group.position = offset;\n\n      const children = document.querySelectorAll(\".images .img img\");\n      children.forEach(child => {\n        child.style.top = offset.top + \"px\";\n        child.style.left = offset.left + \"px\";\n      });\n    },\n    saveGroup: function() {\n      this.$store\n        .dispatch(\"imageGroup/saveGroup\", this.group)\n        .then(response => {\n          this.$bvToast.toast(response.msg, {\n            title: response.status\n          });\n        });\n    }\n  },\n  created: function() {\n    this.$store.getters[\"imageGroup/getGroup\"](this.groupId).then(response => {\n      this.group = {\n        id: response.id,\n        ...response.properties\n      };\n\n      if (this.group.position === undefined) {\n        this.group.position = {};\n      }\n    });\n  }\n};\n</script>\n\n<style lang=\"scss\">\n#view-group {\n  .toggle-gestures {\n    @media (min-width: 768px) {\n      display: none;\n    }\n  }\n\n  .images {\n    .img {\n      height: 350px;\n      overflow: hidden;\n      flex: 0 0 auto;\n      position: relative;\n      margin: 0 0 0 0;\n      // box-shadow: 0 0 0 1px #fff;\n      border: 1px solid #fff;\n      background-color: #ccc;\n\n      img {\n        position: absolute;\n        z-index: 1;\n      }\n\n      &.disabled {\n        &:before {\n          content: \" \";\n          z-index: 2;\n          display: block;\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n          background-color: transparent;\n        }\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ViewGroup.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ViewGroup.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ViewGroup.vue?vue&type=template&id=7bc06fc4&\"\nimport script from \"./ViewGroup.vue?vue&type=script&lang=js&\"\nexport * from \"./ViewGroup.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ViewGroup.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}